cubes:
  - name: survey_form_template
    # sql_table: survey_form_template
    sql: >
      SELECT * FROM survey_form_template WHERE 1 = 1
      {% if COMPILE_CONTEXT.securityContext.companyId %}
        AND survey_form_template.company_id = '{ COMPILE_CONTEXT.securityContext.companyId }'
      {% endif %}
    joins:
      - name: company
        sql: '{CUBE}.company_id = {company}.id'
        relationship: many_to_one
      - name: company_user
        sql: '{CUBE}.company_user_id = {company_user}.id'
        relationship: many_to_one
      - name: survey_form_question_template
        sql: '{CUBE}.id = {survey_form_question_template}.survey_form_template_id'
        relationship: one_to_many
      - name: survey_form
        sql: '{CUBE}.id = {survey_form}.survey_form_template_id'
        relationship: one_to_many
    measures:
      - name: count
        type: count
    dimensions:
      - name: id
        sql: id
        type: number
        primary_key: true
        public: true
      - name: uuid
        sql: '{CUBE}.uuid'
        type: string
      - name: companyid
        sql: '{CUBE}.company_id'
        type: number
      - name: companyuserid
        sql: '{CUBE}.company_user_id'
        type: number
      - name: formtype
        sql: '{CUBE}.form_type'
        type: string
      - name: formtitle
        sql: '{CUBE}.form_title'
        type: string
      - name: formaudience
        sql: '{CUBE}.form_audience'
        type: string
      - name: formdescription
        sql: '{CUBE}.form_description'
        type: string
      - name: anonymousmode
        sql: '{CUBE}.anonymous_mode'
        type: boolean
      - name: sendresponsecopy
        sql: '{CUBE}.send_response_copy'
        type: boolean
      - name: sendsubmissionnotification
        sql: '{CUBE}.send_submission_notification'
        type: boolean
      - name: acceptingresponses
        sql: '{CUBE}.accepting_responses'
        type: boolean
      - name: assigngrader
        sql: '{CUBE}.assign_grader'
        type: boolean
      - name: isdraft
        sql: '{CUBE}.is_draft'
        type: boolean
      - name: isdeleted
        sql: '{CUBE}.is_deleted'
        type: boolean
      - name: isarchived
        sql: '{CUBE}.is_archived'
        type: boolean
      - name: visibility
        sql: '{CUBE}.visibility'
        type: string
      - name: redirecturl
        sql: '{CUBE}.redirect_url'
        type: string
      - name: allowsaveandresume
        sql: '{CUBE}.allow_save_and_resume'
        type: boolean
      - name: allowretakes
        sql: '{CUBE}.allow_retakes'
        type: boolean
      - name: totalretakesallowed
        sql: '{CUBE}.total_retakes_allowed'
        type: number
      - name: expirationtype
        sql: '{CUBE}.expiration_type'
        type: string
      - name: customexpirationhourslength
        sql: '{CUBE}.custom_expiration_hours_length'
        type: number
      - name: totalpointsavailable
        sql: '{CUBE}.total_points_available'
        type: number
      - name: surveypagedetails
        sql: '{CUBE}.survey_page_details'
        type: string
      - name: createdat
        sql: '{CUBE}.created_at'
        type: time
      - name: updatedat
        sql: '{CUBE}.updated_at'
        type: time
